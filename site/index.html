<html>
    <head>Bluetooth Controller</head>
    <body>
        <h1>Found devices:</h1>
        </br>
        <script>
            function sleep(ms) {
                return new Promise(resolve => setTimeout(resolve, ms));
            }

           var ws = new WebSocket("ws://127.0.0.1:8080");
           console.log("test log");

            ws.onopen = (event) => {
                console.log("Websocket opened");

                while(true) {
                    //sleep(1000).then(() => { console.log("Loop"); });
                    setTimeout(() => { ws.send("This is a message"); }, 1000);
                }
                //ws.send("fesfeghuioiwuehfoiqubnwdkjflhjkldhof7ui34h879pfesfeghuioiwuehfoiqubnwdkjflhjkldhof7ui34h879pfesfeghuioiwuehfoiqubnwdkjflhjkldhof7ui34h879p");
            }

            ws.onclose = (event) => {
                console.log("Connection closed");
            }
            
            ws.onmessage = (event) => {
                console.log(event.data);
            }

            ws.onerror = (error) => {
                console.log("Error code ", error.code)
                console.log("Error ", error.stack);
                console.log("Error ", error.name);
                console.log("Error ", error.message);
            };
        </script>
    </body>
</html>
